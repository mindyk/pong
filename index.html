<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <title>HTML5 Game Development Tutorial | Spicy Yoghurt</title>
    <meta name="description" content="HTML5 game development tutorial">
    <meta name="author" content="Spicy Yoghurt">
</head>

<body>
    <canvas id="canvas" width="750" height="400" style="border:1px solid lightgrey;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
    <script src="js/mainloop.js"></script>
    <script src="js/ball.js"></script>
    <script src="js/player.js"></script>
    <script>
        const COLOR_DEFAULT = '#000';
        const COLOR_HIT = '#F00';
        // Declare as variable
        var canvas;
        var context;
        var GAME_WIDTH = 750;
        var GAME_HEIGHT = 400;
        var IS_KEY_DOWN = true;

        // Listen to the onLoad event
        window.onload = init;

        // Trigger init function when the page has loaded
        function init() {
            canvas = document.getElementById('canvas');
            context = canvas.getContext('2d');
            ball.init();

            MainLoop.setUpdate(update).setDraw(draw).start();
        }



        function update() {
          context.clearRect(0,0,GAME_WIDTH,GAME_HEIGHT);
          ball.update();
          p1.update();
        }

        function draw() {
            ball.draw();
            p1.draw();
        }


        document.onkeydown = function (e) {
            IS_KEY_DOWN = true;
            switch (e.code) {
                case 'KeyS':
                    console.log('down');
                    p1.vY += 2;
                    break;
                    case 'KeyW':
                        console.log('up');
                        p1.vY -= 2;
                        break;
                    default:
                        console.log(e.code);
            }
        };

        document.onkeyup = function (e) {
            IS_KEY_DOWN = false;
        };


    </script>
</body>

</html>
